(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{670:function(t,s,a){"use strict";a.r(s);var n=a(18),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"matlab安装matconvnet"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#matlab安装matconvnet"}},[t._v("#")]),t._v(" matlab安装Matconvnet")]),t._v(" "),a("h3",{attrs:{id:"安装步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装步骤"}},[t._v("#")]),t._v(" 安装步骤")]),t._v(" "),a("p",[a("code",[t._v("前提：已经安装好 CUDA 和 CUDNN ，最好先安装 Visual Studio 再安装 matlab ，否则在 matlab 里 mex -setup 命令关联不到 VS 的 c++ 编译器，并且 VS 要自定义安装，选择 c++ 。")])]),t._v(" "),a("p",[t._v("1、首先，在"),a("a",{attrs:{href:"https://www.vlfeat.org/matconvnet/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网"),a("OutboundLink")],1),t._v("上下载matconvnet压缩包。")]),t._v(" "),a("p",[t._v("2、安装 matlab 支持的编译器 MinGW，在"),a("a",{attrs:{href:"https://ww2.mathworks.cn/matlabcentral/fileexchange/52848-matlab-support-for-mingw-w64-c-c-compiler",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网"),a("OutboundLink")],1),t._v("上下载，之后将下载好的文件放在 matlab 的 bin 文件夹中，打开 matlab ，将当前目录切换到 bin 中，打开下载好的文件，根据步骤进行安装。")]),t._v(" "),a("p",[t._v("3、若没有 Visual Studio，则需要下载 Visual Studio ，之后在 matlab 命令窗口依次输入以下命令：")]),t._v(" "),a("div",{staticClass:"language-matlab extra-class"},[a("pre",{pre:!0,attrs:{class:"language-matlab"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" cd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("MatConvNet"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("% 将路径切换到matconvnet文件夹下")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" addpath matlab"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" vl_compilenn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" vl_testnn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("以上是使用CPU的情况，使用GPU的编译流程如下：")]),t._v(" "),a("div",{staticClass:"language-matlab extra-class"},[a("pre",{pre:!0,attrs:{class:"language-matlab"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vl_compilenn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'enableGpu'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" true"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("或者：")]),t._v(" "),a("div",{staticClass:"language-matlab extra-class"},[a("pre",{pre:!0,attrs:{class:"language-matlab"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vl_compilenn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'enableGpu'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" true"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n               "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cudaRoot'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/Developer/NVIDIA/CUDA-7.5'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("%这里是CUDA的安装地址，一般是在C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v11.0这里。")]),t._v("\n               "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cudaMethod'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'nvcc'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n               "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'enableCudnn'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" true"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n               "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cudnnRoot'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'local/cudnn-rc4'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("%这里是CUDNN的安装地址，依据个人情况的不同。")]),t._v("\n")])])]),a("p",[t._v("编译成功后使用以下命令：")]),t._v(" "),a("div",{staticClass:"language-matlab extra-class"},[a("pre",{pre:!0,attrs:{class:"language-matlab"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vl_testnn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'gpu'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" true"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("% 这条命令编译需要很长时间")]),t._v("\n")])])]),a("p",[t._v("注意："),a("br"),t._v("\n1）Matconvnet 只需要配置一次，不同的算法，直接把配置好的 Matconvnet，路径下的 "),a("code",[t._v("MATLAB/mex")]),t._v(" 的文件拷贝到需要运行的算法对应位置处即可，不需要每次都配置。"),a("br"),t._v("\n2）Matlconvnet 可以编译成功，但是每次开 matlab 都需要编译一次？不需要，关闭 matlab 重新打开后，先运行 gpuDevice 然后就可以正常使用了 Matconvnet 了。")]),t._v(" "),a("h3",{attrs:{id:"出现的问题及解决方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#出现的问题及解决方案"}},[t._v("#")]),t._v(" 出现的问题及解决方案")]),t._v(" "),a("p",[t._v("1、在输入"),a("code",[t._v("vl_compilenn")]),t._v("这步可能会出现如下问题：")]),t._v(" "),a("div",{staticClass:"language-matlab extra-class"},[a("pre",{pre:!0,attrs:{class:"language-matlab"}},[a("code",[t._v("警告"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" CL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EXE not found in PATH"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" Trying to guess out of mex setup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" In vl_compilenn"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("check_clpath")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("line "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("650")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  In "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vl_compilenn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("line "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("426")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cl.exe'")]),t._v(" 不是内部或外部命令，也不是可运行的程序 \n或批处理文件。 \n错误使用 vl_compilenn"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("check_clpath")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("line "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("656")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nUnable to find cl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exe\n\n出错 "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vl_compilenn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("line "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("426")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    cl_path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fileparts")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("check_clpath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("% check whether cl.exe in path")]),t._v("\n")])])]),a("p",[t._v("解决方案：这是因为系统没找到 cl.exe 文件，这个文件在 Visual Studio 中的，一般在"),a("code",[t._v("E:\\Program Files (x86)\\Microsoft Visual Studio\\VC\\Tools\\MSVC\\14.16.27023\\bin\\Hostx86\\x86")]),t._v("中。注意，在下载安装VS时要把编译器的那些选项选上，才能找到 VC 文件夹。找到 cl.exe 文件，然后将其将其路径添加到环境变量中即可。具体添加过程如下："),a("br"),t._v("\n1）打开此电脑，右键点击属性，然后点击左侧的高级系统设置，再点击环境变量，我们这里在用户变量中添加即可。"),a("br"),t._v("\n2）找到 Path，双击然后在末尾添加你电脑中 cl.exe 对应的路径。到这里测试一下，按 Windows + R 的组合键，然后输入 cmd 命令，打开控制台，输入 cl 。")]),t._v(" "),a("p",[t._v("2、在输入"),a("code",[t._v("vl_compilenn")]),t._v("这步可能会出现如下问题：")]),t._v(" "),a("div",{staticClass:"language-matlab extra-class"},[a("pre",{pre:!0,attrs:{class:"language-matlab"}},[a("code",[t._v("出错 vl_compilenn"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mex_link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("line "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("627")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mex")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n出错 "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vl_compilenn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("line "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mex_link")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" objs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" flags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mex_dir"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" flags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("解决方案：这是因为 matlab 不支持 Mingw 编译器（虽然 matlab 很推荐），要使用 Visual Studio 的 C++ 编译器，先在 matlab 命令窗口输入"),a("code",[t._v("mex -setup -v")]),t._v("命令，查看可以使用的编译器，若有 Visual Studio 编译器则使用，若没有 Visual Studio 编译器，可能是因为注册表中没有 Microsoft SDK 这个注册表项，需要在 Visual Studio 安装界面（不管有没有安装好），在组件中找到 Visual Studio SDK 和 Windows 10 SDK 选上，安装或修改。之后重新打开 matlab ，重新输入命令 "),a("code",[t._v("vl_compilenn")]),t._v(" ，则可以正确编译。")]),t._v(" "),a("p",[t._v("3、在"),a("code",[t._v("vl_compilenn('enableGpu', true)")]),t._v("时可能会出现如下错误：")]),t._v(" "),a("div",{staticClass:"language-matlab extra-class"},[a("pre",{pre:!0,attrs:{class:"language-matlab"}},[a("code",[t._v("Error using vl_compilenn"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("nvcc_compile")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("line "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("615")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v('\nCommand "C'),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("Program Files"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("NVIDIA GPU Computing Toolkit"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("CUDA"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("v9"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("bin"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v('nvcc" '),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("c "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v('o\n"D'),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("Matlab"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("matconvnet"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("beta25"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("matconvnet"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("beta25"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("matlab"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("mex"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("build"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("bits"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v('obj"\n"D'),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("Matlab"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("matconvnet"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("beta25"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("matconvnet"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("beta25"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("matlab"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("src"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("bits"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v('cu" '),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("DENABLE_GPU "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("DENABLE_DOUBLE\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("DENABLE_CUDNN "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v('I"'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("cudnn"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v('include" '),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("O "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("DNDEBUG "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("D_FORCE_INLINES "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("std"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("c"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v('I"D'),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("Matlab"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("extern"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v('include" '),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v('I"D'),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("Matlab"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("toolbox"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("distcomp"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("gpu"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("extern"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v('include"\n'),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("gencode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("arch"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("compute_52"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("code"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v('"sm_52'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("compute_52"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v('"  '),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("compiler"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("MD "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("compiler"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("bindir"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v('"C'),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("Program\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Files")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x86"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("Microsoft Visual Studio"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2017")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("Community"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("VC"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v('bin"  failed'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\nError in "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vl_compilenn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("line "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("487")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("nvcc_compile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" srcs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("i")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" objfile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" flags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("解决方案：（以下几个步骤可能都需要用到，不确定哪个是对的）"),a("br"),t._v("\n1）在 "),a("code",[t._v("C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC")]),t._v(" 下创建 bin 文件夹。"),a("br"),t._v("\n2）在 matconvnet-1.0-beta25（建议重命名文件夹改为 matconvnet）中建一个 local 文件夹（与 example 和 matlab 等同一“级别”），然后把下载的 cudnn 放进去。"),a("br"),t._v("\n3）更改 matlab 配置 GPU 的配置文件，其路径是 "),a("code",[t._v("D:\\Softwares\\MATLAB\\toolbox\\distcomp\\gpu\\extern\\src\\mex\\win64")]),t._v(" ，在其中有多个文件如 "),a("code",[t._v("nvcc_msvcpp2015_dynamic.xml ,nvcc_msvcpp2015.xml")]),t._v("等文件，打开这些文件，注意，这里需要更改的配置文件与使用编译的 Visual Studio 版本有关，本人 VS 版本是2017，所以更改 "),a("code",[t._v("nvcc_msvcpp2017.xml")]),t._v("和"),a("code",[t._v("nvcc_msvcpp2017_dynamic.xml")]),t._v("即可，为保险起见，将这些文件全部修改。具体修改是将文件中CUDA版本如"),a("code",[t._v("8.0")]),t._v("改为自己所安装的 CUDA 版本"),a("code",[t._v("11.0")]),t._v("，注意是全部替换掉。"),a("br"),t._v("\n4）打开"),a("code",[t._v("vl_compilenn.m")]),t._v("，更改687行，原先是：")]),t._v(" "),a("div",{staticClass:"language-matlab extra-class"},[a("pre",{pre:!0,attrs:{class:"language-matlab"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" v "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'5.5'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'6.0'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'6.5'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'7.0'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'7.5'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'8.0'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'8.5'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'9.0'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'9.5'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'10.0'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("；\n")])])]),a("p",[t._v("将其改为：")]),t._v(" "),a("div",{staticClass:"language-matlab extra-class"},[a("pre",{pre:!0,attrs:{class:"language-matlab"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" v "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'5.5'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'6.0'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'6.5'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'7.0'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'7.5'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'8.0'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'8.5'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'9.0'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'9.5'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'10.0'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'11.0'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("%这里最后新添加的‘11.0’是指自己的CUDA版本；")]),t._v("\n")])])]),a("br"),t._v(" "),a("p",[t._v("4、在"),a("code",[t._v("vl_compilenn('enableGpu', true)")]),t._v("时可能会出现如下错误：")]),t._v(" "),a("div",{staticClass:"language-matlab extra-class"},[a("pre",{pre:!0,attrs:{class:"language-matlab"}},[a("code",[t._v("nvcc fatal   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-DNDEBUG'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" expected a number \n错误使用 vl_compilenn"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("nvcc_compile")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("line "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("615")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v('\nCommand "C'),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("Program Files"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("NVIDIA GPU Computing Toolkit"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("CUDA"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("v10"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("bin"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v('nvcc" '),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("c "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v('o\n"E'),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("matconvnet"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("matlab"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("mex"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("build"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("bits"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v('obj"\n"E'),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("matconvnet"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("matlab"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("src"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("bits"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v('cu" '),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("DENABLE_GPU\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("DENABLE_DOUBLE "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("O "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("DNDEBUG "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("D_FORCE_INLINES "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("std"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("c"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v('I"D'),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("Softwares"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("MATLAB"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("extern"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v('include"\n'),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v('I"D'),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("Softwares"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("MATLAB"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("toolbox"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("distcomp"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("gpu"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("extern"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v('include" '),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("gencode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("arch"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("compute_75"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("code"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v('"sm_75'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("compute_75"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v('"  '),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("compiler"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("MD\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("compiler"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("bindir"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v('"D'),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("Softwares"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("VisualStudio"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("VC"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("Tools"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("MSVC"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14.16")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".27023")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v("bin"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("\\")]),t._v('Hostx64"  failed'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\n出错 "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vl_compilenn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("line "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("487")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("nvcc_compile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" srcs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("i")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" objfile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" flags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("出现原因：CUDA 10.1 以前的版本使用非 debug 模式下 GPU 优化指令是"),a("code",[t._v("-O")]),t._v("，CUDA 10.1以上版本把"),a("code",[t._v("-O")]),t._v("指令给弃用了。现在的指令为"),a("code",[t._v("-O+")]),t._v("数字，此处的数字为优化的等级。"),a("code",[t._v("vl_compilenn")]),t._v("默认编译是非 debug 模式的，所以 matlab 会提示我们需要一个数字。"),a("br"),t._v("\n解决方案：将"),a("code",[t._v("vl_compilenn.m")]),t._v("，将606行的"),a("code",[t._v("nvcc_compile")]),t._v("函数进行更改。原先的函数为：")]),t._v(" "),a("div",{staticClass:"language-matlab extra-class"},[a("pre",{pre:!0,attrs:{class:"language-matlab"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("nvcc_compile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" src"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tgt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" flags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("% --------------------------------------------------------------------")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("check_deps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tgt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" src"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\nnvcc_path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fullfile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cudaRoot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'nvcc'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nnvcc_cmd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sprintf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'"%s" -c -o "%s" "%s" %s \'')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n                   nvcc_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tgt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" src"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n                   "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("strjoin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("horzcat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("flags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("base"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("flags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nvcc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nopts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("verbose "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fprintf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'%s: NVCC CC: %s\\n'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mfilename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nvcc_cmd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nstatus "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("system")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nvcc_cmd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" status"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Command %s failed.'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nvcc_cmd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("更改后的函数为：")]),t._v(" "),a("div",{staticClass:"language-matlab extra-class"},[a("pre",{pre:!0,attrs:{class:"language-matlab"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("nvcc_compile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" src"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tgt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" flags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("% --------------------------------------------------------------------")]),t._v("\nmybase"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("flags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("base"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mybase")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-O3'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("check_deps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tgt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" src"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\nnvcc_path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fullfile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cudaRoot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'nvcc'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nnvcc_cmd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sprintf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'"%s" -c -o "%s" "%s" %s \'')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n                   nvcc_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tgt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" src"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n                   "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("strjoin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("horzcat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mybase"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("flags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nvcc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nopts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("verbose "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fprintf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'%s: NVCC CC: %s\\n'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mfilename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nvcc_cmd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nstatus "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("system")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nvcc_cmd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" status"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Command %s failed.'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nvcc_cmd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);